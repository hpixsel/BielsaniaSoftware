---
import Layout from "./Layout.astro";
import PersonGame from "../components/PersonGame.astro";

const { frontmatter } = Astro.props;
---

<Layout title={frontmatter.title}>
  <div class="game_layout wrapper">
    <div class="game_layout__top">
      <div class="game_layout__socials">
        {
          frontmatter?.steam ? (
            <a href={frontmatter?.steam} target="_blank">
              <title>Steam Link</title>
              <svg
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12 0C13.5759 0 15.1363 0.310389 16.5922 0.913446C18.0481 1.5165 19.371 2.40042 20.4853 3.51472C21.5996 4.62902 22.4835 5.95189 23.0866 7.4078C23.6896 8.86371 24 10.4241 24 12C24 15.1826 22.7357 18.2348 20.4853 20.4853C18.2348 22.7357 15.1826 24 12 24C6.48 24 1.86 20.304 0.432 15.276L5.028 17.172C5.18611 17.9404 5.60419 18.6308 6.21183 19.127C6.81946 19.6231 7.57953 19.8947 8.364 19.896C10.236 19.896 11.76 18.372 11.76 16.5V16.344L15.84 13.428H15.936C18.432 13.428 20.46 11.4 20.46 8.904C20.46 6.408 18.432 4.38 15.936 4.38C13.44 4.38 11.4 6.408 11.4 8.904V8.964L8.556 13.116L8.364 13.104C7.656 13.104 6.996 13.32 6.456 13.692L0 11.04C0.516 4.86 5.676 0 12 0ZM7.536 18.204C8.496 18.6 9.6 18.156 9.996 17.196C10.392 16.236 9.936 15.144 9 14.748L7.464 14.112C8.052 13.896 8.712 13.884 9.336 14.148C9.972 14.4 10.464 14.892 10.716 15.528C10.98 16.152 10.98 16.848 10.716 17.472C10.2 18.768 8.676 19.392 7.38 18.852C6.78 18.6 6.324 18.144 6.072 17.604L7.536 18.204ZM18.96 8.904C18.96 10.572 17.604 11.928 15.936 11.928C15.1361 11.9248 14.37 11.6048 13.8055 11.0381C13.2409 10.4713 12.924 9.70394 12.924 8.904C12.9224 8.50801 12.9992 8.11563 13.15 7.74948C13.3008 7.38333 13.5226 7.05066 13.8027 6.77066C14.0827 6.49065 14.4153 6.26885 14.7815 6.11804C15.1476 5.96724 15.54 5.89041 15.936 5.892C16.7359 5.89199 17.5033 6.20895 18.0701 6.77346C18.6368 7.33798 18.9568 8.10407 18.96 8.904ZM13.68 8.904C13.68 10.152 14.688 11.172 15.948 11.172C17.196 11.172 18.204 10.152 18.204 8.904C18.204 7.656 17.196 6.636 15.948 6.636C14.688 6.636 13.68 7.656 13.68 8.904Z"
                  fill="white"
                />
              </svg>
            </a>
          ) : (
            ""
          )
        }
        {
          frontmatter?.gamejolt ? (
            <a href={frontmatter?.gamejolt} target="_blank">
              <title>Gamejolt Link</title>
              <svg
                viewBox="0 0 23 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M5.647 0V2.824H4.234V5.647H2.824V8.47096H1.412V11.294H0V14.118H8.47V16.941H7.059V19.765H5.647V22.588H7.059V21.176H8.47V19.765H9.882V18.353H11.294V16.94H12.706V15.53H14.118V14.119H15.529V12.707H16.941V11.295H18.353V9.882H19.765V8.47096H21.176V7.059H16.941V5.647H18.353V4.235H19.765V2.824H21.176V1.412H22.588V0H5.647ZM5.647 22.588H4.234V24H5.646L5.647 22.588ZM7.059 2.824H16.941V4.235H15.529V5.647H14.118V7.06H12.706V8.47H11.294V9.88096H12.706V11.293H11.294V9.882H9.882V11.294H8.47V9.882H7.059V11.294H5.647V9.882H4.234V8.47096H5.646V5.647H7.058L7.059 2.824ZM5.647 8.47V9.88096H7.059V8.47096L5.647 8.47ZM8.47 9.88096H9.882V8.47096H8.47V9.88096ZM14.118 9.88096H15.529V11.293H14.118V9.88096Z"
                  fill="white"
                />
              </svg>
            </a>
          ) : (
            ""
          )
        }
      </div>
      <h2>{frontmatter.title}</h2>
    </div>
    <div class="game_layout__imgs">
      <div class="game_layout__imgs__slides">
        {
          frontmatter.imgs.map((img: string, id: number) => {
            return <img id={"slide-" + id} src={"/gry/" + img} alt="" />;
          })
        }
      </div>
      <div class="game_layout__imgs__nav">
        {
          frontmatter.imgs.map((img: string, id: number) => {
            return (
              <a href={"#slide-" + id}>
                <img src={"/gry/" + img} alt={"slide" + id} />
              </a>
            );
          })
        }
      </div>
    </div>
    <slot />
    <div class="game_layout__team">
      <h2>Zespół pracujący nad grą:</h2>
      <div class="game_layout__team__persons">
        {frontmatter.team.map((person: any) => <PersonGame {...person} />)}
      </div>
    </div>
  </div>
</Layout>

<style>
  .game_layout {
    margin-top: 1.5rem;
  }

  .game_layout__socials {
    display: flex;
    gap: 1rem;
  }

  .game_layout__socials > * {
    width: 2rem;
  }

  .game_layout__top h2 {
    display: flex;
    gap: 0.5rem;
    align-items: center;
    margin-top: 1rem;
    color: var(--_text-color);
  }

  .game_layout__top h2::before {
    content: "";
    display: block;
    width: 4px;
    height: 1.5rem;
    background-color: var(--clr-secondary);
  }

  .game_layout__imgs {
    margin-top: 1rem;
    width: 100%;
    overflow: hidden;
  }

  .game_layout__imgs__slides {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x proximity;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  .game_layout__imgs__slides img {
    min-width: 100%;
    max-width: 100%;
    border-radius: 0.25rem;
    overflow: hidden;
    scroll-snap-align: start;
    scroll-margin-top: 15rem;
  }

  .game_layout__imgs__slides > * + * {
    margin-left: 1rem;
  }

  .game_layout__imgs__slides::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  .game_layout__imgs__slides::-webkit-scrollbar-thumb {
    background: black;
    border-radius: 10px;
  }

  .game_layout__imgs__slides::-webkit-scrollbar-track {
    background: transparent;
  }

  .game_layout__imgs__nav {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1rem;
    margin-top: 1rem;
  }

  .game_layout__imgs__nav > * {
    width: 100%;
    overflow: hidden;
    border-radius: 0.25rem;
  }

  .game_layout__imgs__nav img {
    width: 100%;
  }

  .game_layout :global(p) {
    margin-top: 1rem;
  }

  .game_layout__team {
    margin-top: 2rem;
  }

  .game_layout__team h2 {
    font-size: 1.25rem;
  }

  .game_layout__team__persons {
    margin-top: 1rem;
    display: grid;
    gap: 2rem;
  }

  @media (min-width: 60rem) {
    .game_layout__top {
      display: flex;
      flex-direction: row-reverse;
      align-items: center;
      justify-content: space-between;
      padding-block: 1.5rem;
      padding-right: 1.5rem;
      border-radius: 0 2rem 2rem 0;
      background: linear-gradient(
        90deg,
        rgba(139, 136, 139, 0) 50%,
        rgba(139, 136, 139, 0.125) 100%
      );
    }

    .game_layout__imgs {
      margin-top: 2rem;
    }

    .game_layout__imgs__nav {
      margin-top: 2rem;
      gap: 2rem;
    }

    .game_layout :global(p) {
      margin-top: 2rem;
    }

    .game_layout__team {
      margin-top: 4rem;
    }

    .game_layout__team h2 {
      font-size: 1.5rem;
    }

    .game_layout__team__persons {
      margin-top: 2rem;
    }
  }
</style>
